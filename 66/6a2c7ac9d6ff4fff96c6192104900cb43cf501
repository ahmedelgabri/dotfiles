# vim:ft=muttrc:

unmailboxes *
set my_user   = "ahmed.elgabri@lightspeedhq.com"
set sendmail = "/usr/local/bin/msmtp -a work"
set from      = "$my_user"
set signature = ~/.mutt/account/signature.work

alternates '^ahmed.elgabri@lightspeedretail.com$' '^ahmed.el.gabri@lightspeedretail.com$' '^ahmed.el.gabri@lightspeedhq.com$'

set spoolfile = "+Work/Work"
set mbox      = "+Work/Work.Archive"
set postponed = "+Work/Work.Drafts"
set trash     = "+Work/Work.Trash" # This is using the 'trash' patch.
# Some magic from https://github.com/alexpearce/dotfiles/blob/4d287a1b6c01908ddbc33cf84f9765371493652b/mail/.mutt/accounts/work#L27
mailboxes "+Work/Work" \
      "+Work/Work.Starred" \
      "+Work/Work.Sent" \
      "+Work/Work.Drafts" \
      "+Work/Work.Archive" \
      "+Work/Work.Trash" \
      "+Work/Work.Spam" \
      `tree ~/.mail -d -I "cur|new|tmp|certs|.notmuch|Inbox|\[Gmail\]" -a -f -i | sed -n -E -e "s|^/Users/ahmed/.mail/?||" -e "/^(Work|Personal)(\/[a-z].+)?$/d" -e "/^(Work)/{p;}" | sed -E -e 's/(.*)/+"\1"/' | tr '\n' ' '`

macro index,pager gp '<enter-command>source ~/.mutt/accounts/personal<enter><change-folder>!<enter>'
macro index SI "<shell-escape>mbsync work-download<enter>" "sync inbox"
macro index,pager y "<save-message>=Work/Work.Archive<enter>" "Archive conversation"
macro index,pager Y "<tag-thread><tag-prefix><save-message>=Work/Work.Archive<enter>" "Archive thread"

color status red default
color sidebar_highlight black red
color sidebar_indicator red color0
